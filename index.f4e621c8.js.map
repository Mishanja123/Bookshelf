{"mappings":"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","sources":["src/js/modals.js","src/js/sidebarmaincontent.js","src/js/firebase/addLocal.js"],"sourcesContent":["import {\n  marckModal,\n  marckCategorieItem,\n  marckAllCategories,\n  marckUpSideCategories,\n} from './marckupcategories.js';\nimport { booksView } from './sidebarmaincontent.js';\nimport { fetchBook } from './fetchapis.js';\nimport { addToLocalStorage } from './firebase/addLocal.js'\nconst modalCardBtn = document.querySelector('.add-book-button');\n\nconst overlay = document.querySelector('#overlay-modal');\nconst closeButton = document.querySelector('.js-modal-close');\nconst modal = document.querySelector('.modal');\nconst modalContent = document.querySelector('.modal-content');\nlet bookId = ''\nfunction closeModal() {\n  modal.classList.remove('active');\n  overlay.classList.remove('active');\n  document.body.style.overflow = '';\n\n  closeButton.removeEventListener('click', closeModal);\n  overlay.removeEventListener('click', closeModal);\n  document.removeEventListener('keydown', handleKeyPress);\n}\n\nfunction handleKeyPress(event) {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n}\n\nasync function createMarckModal(bookId) {\n  const mark = await marckModal(bookId);\n  modalContent.innerHTML = mark;\n}\nbooksView.addEventListener('click', onBook);\n\nasync function onBook(e) {\n  try {\n    bookId = e.target.closest('.outlineli').dataset.id;\n  } catch (error) {\n    return;\n  }\n  if (!bookId) {\n    return;\n  }\n  await createMarckModal(bookId);\n\n// const addButton = document.querySelector('.add-book-button');\n// addButton.addEventListener('click', changeBtnText);\n\n// function changeBtnText() {\n//     if (this.textContent === 'add to shopping list') {\n//       this.textContent = 'remove from the shopping list';\n//     } else {\n//       this.textContent = 'Add to shopping list';\n//     } return\n//   };\n  async function addClass() {\n    modal.classList.add('active');\n    overlay.classList.add('active');\n    document.body.style.overflow = 'hidden';\n\n    closeButton.addEventListener('click', closeModal);\n    overlay.addEventListener('click', closeModal);\n    document.addEventListener('keydown', handleKeyPress);\n    closeButton.removeEventListener('click', onBook);\n    overlay.removeEventListener('click', onBook);\n  }\n  addClass();\n}\n\n\n\nmodalCardBtn.addEventListener('click', onClickBtnAddCard);\n\n  function onClickBtnAddCard() {\n const booksId = document.querySelector('.book');\n    const id = booksId.getAttribute('data-book-id');\n\n    fetchBook(id)\n      .then(({ book_image, title, author, description, _id, list_name, buy_links }) => {\n        const bookCard = {\n          book_image,\n          title,\n          author,\n          description,\n          _id,\n          list_name,\n         buy_links\n        };\n        addToLocalStorage(bookCard)\n        // modalCardBtn.textContent = 'remove from the shopping list'\n      });\n}\n","import {\n  marckUpSideCategories,\n  marckAllCategories,\n  marckCategorieItem,\n  marckModal,\n  marckCategorieItemMore,\n} from './marckupcategories.js';\n\nconst sideCategoriesList = document.querySelector('.js_side_categories_list');\nconst loader = document.querySelector('.wrap');\nconst categoriesTitle = document.querySelector('.title_categories');\n\nfunction addLoader() {\n  loader.classList.remove('hidden');\n  categoriesTitle.classList.add('hidden');\n}\nfunction removeLoader() {\n  loader.classList.add('hidden');\n  categoriesTitle.classList.remove('hidden');\n}\n\nexport const booksView = document.querySelector('.js_books_view');\n\nasync function createMarckUpSideCategories() {\n  const mark = await marckUpSideCategories();\n  sideCategoriesList.insertAdjacentHTML('beforeend', mark);\n}\ncreateMarckUpSideCategories();\n\nasync function createMarckAllCategories() {\n  booksView.innerHTML = '';\n  addLoader();\n  const mark = await marckAllCategories();\n  booksView.innerHTML = mark;\n  removeLoader();\n}\ncreateMarckAllCategories();\n\nasync function createMarckCategorieItem(target) {\n  booksView.innerHTML = '';\n  addLoader();\n  const mark = await marckCategorieItem(target);\n  booksView.innerHTML = mark;\n  removeLoader();\n}\n\nfunction createModal(bookId) {\n  const mark = marckModal(bookId);\n  return mark;\n}\n\nsideCategoriesList.addEventListener('click', onClick);\n\nasync function onClick(e) {\n  e.preventDefault();\n  let target = e.target.textContent;\n\n  if (!(e.target.tagName === 'A')) {\n    return;\n  }\n  if (target === 'All categories') {\n    createMarckAllCategories();\n  } else {\n    createMarckCategorieItem(target);\n  }\n  [...e.currentTarget.children].map(el =>\n    el.classList.remove('selected-category')\n  );\n  e.target.parentNode.classList.add('selected-category');\n}\n\n// Отрисовка на кнопку See More\nbooksView.addEventListener('click', onSeeMore);\nasync function onSeeMore(e) {\n  let targetBtn = e.target.classList.contains('load-more-books');\n  if (!targetBtn) {\n    return;\n  }\n  let fetchtitle = e.target.closest('.category-books').firstChild.textContent;\n  await createMarckCategorieItemMore(fetchtitle);\n  e.target.classList.add('no-btn');\n  [...e.target.previousSibling.children].map(el =>\n    el.classList.remove('hidden')\n  );\n}\n\nasync function createMarckCategorieItemMore(target) {\n  const listBooks = document.querySelectorAll('.list-books');\n  const a = [...listBooks].filter(el => el.dataset.category === target);\n  const mark = await marckCategorieItemMore(target);\n  a[0].innerHTML = mark;\n}\n","export function addToLocalStorage(bookCard) {\n  const all = getBookCardToLocalStorage();\n  all.push(bookCard);\n  localStorage.setItem('bookCard', JSON.stringify(all));\n}\n\nexport function getBookCardToLocalStorage() {\n  return JSON.parse(localStorage.getItem('bookCard') || '[]');\n}"],"names":["$a3AA9","parcelRequire","$f16d2296cebb3cad$var$sideCategoriesList","document","querySelector","$f16d2296cebb3cad$var$loader","$f16d2296cebb3cad$var$categoriesTitle","$f16d2296cebb3cad$var$addLoader","classList","remove","add","$f16d2296cebb3cad$var$removeLoader","$f16d2296cebb3cad$export$e48a6d30edcb68e4","async","$f16d2296cebb3cad$var$createMarckAllCategories","innerHTML","mark","marckAllCategories","marckUpSideCategories","insertAdjacentHTML","$f16d2296cebb3cad$var$createMarckUpSideCategories","addEventListener","e","preventDefault","target","textContent","tagName","marckCategorieItem","$f16d2296cebb3cad$var$createMarckCategorieItem","currentTarget","children","map","el","parentNode","contains","fetchtitle","closest","firstChild","a","querySelectorAll","filter","dataset","category","marckCategorieItemMore","$f16d2296cebb3cad$var$createMarckCategorieItemMore","previousSibling","$6421f71f9016d987$export$b4aebac53294aa19","bookCard","all","JSON","parse","localStorage","getItem","push","setItem","stringify","$ad94b8937b09ba8f$var$modalCardBtn","$ad94b8937b09ba8f$var$overlay","$ad94b8937b09ba8f$var$closeButton","$ad94b8937b09ba8f$var$modal","$ad94b8937b09ba8f$var$modalContent","$ad94b8937b09ba8f$var$bookId","$ad94b8937b09ba8f$var$closeModal","body","style","overflow","removeEventListener","$ad94b8937b09ba8f$var$handleKeyPress","event","key","$ad94b8937b09ba8f$var$onBook","id","error","addClass","bookId1","marckModal","$ad94b8937b09ba8f$var$createMarckModal","getAttribute","$1kawI","fetchBook","then","book_image","title","author","description","_id","list_name","buy_links"],"version":3,"file":"index.f4e621c8.js.map"}